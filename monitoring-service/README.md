# Monitoring-Service App

---
Консольное приложение для передачи показаний со счетчиков горячей, холодной воды и т.д.
Взаимодействие с приложением происходит через консоль.

---
Стек используемых технологий:
- Java 17
- JDBC
- PostgreSQL
- Liquibase
- Lombok
- Logback
- Testcontainers
- Javadoc

---
Диаграмма главных классов

![pic1](classes.jpg)

---
## Локальный запуск

### Требования

Проект использует синтаксис Java 17. Для локального запуска вам потребуется
установленный JDK 17, а также Docker Desktop для запуска контейнера с базой данных Postgres.

### Используя среду разработки IDEA
Откройте проект. Дождитесь индексации.
В корне проекта находится файл docker-compose.yml c контейнером базы данных PostgreSQL.
Первый шаг - запуск контейнера базы данных 'monitoring_service_db'. 
Откройте файл docker-compose в среде разработки и нажмите на значок запуска напротив имени контейнера (зеленый треугольник),
либо в командной строке перейдите в папку с проектом и запустите командой:
```
docker-compose run --service-ports monitoring_service_database
```

Запустите main метод класса [src/main/java/org/example/monitoringservice/Main.java](src/main/java/org/example/monitoringservice/Main.java)

---
После запуска приложения можно работать с программой из консоли посредством следующих команд:
- REGISTER - зарегистрировать аккаунт, после ввода команды программа ожидает ввода email и роли пользователя;
- LOGIN - выполнение входа в личный кабинет, после ввода команды программа ожидает ввода адреса электронной почты;
- AUTHORITY - получение информации о полномочиях пользователя на сайте в зависимости от присвоенной роли;
- LOGOUT - выход из личного кабинета;
- SEND - передача показаний счетчика, после ввода команды программа ожидает ввода наименования типа передаваемого показания и значения показания. Для подачи следующего показания необходимо повторно ввести команду SEND;
- ADD - добавление нового типа показания, после ввода команды программа ожидает ввода типа показаний;
- ACTUAL - вывод всех актуальных показаний;
- MONTH - вывод показаний за конкретный месяц, после ввода команды программа ожидает ввода месяца;
- HISTORY - вывод истории подачи показаний;
- HELP - вывод списка возможных команд

---
Приложение логирует действия пользователя с записью логов в файл. Файл сохраняется в папку logs в корне проекта.

## Настриваемые параметры

- порт для подключения к базе данных: устанавливается в файле [src/main/resources/config.properties](src/main/resources/config.properties), по умолчанию установлен порт 5434,
  при изменении необходимо задать такой же внешний порт для контейнера 'monitoring_service_database' в файле docker-compose.yml;